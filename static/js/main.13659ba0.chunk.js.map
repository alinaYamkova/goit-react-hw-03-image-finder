{"version":3,"sources":["Components/Button/Button.module.css","Components/Searchbar/Searchbar.module.css","services/API.js","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Button/Button.js","Components/Modal/Modal.js","App.js","index.js"],"names":["module","exports","getFetch","searchQuery","currentPage","url","fetch","then","res","json","response","hits","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","changeQuery","this","className","s","onSubmit","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","name","onChange","Component","ImageGalleryItem","selectedImg","largeImageURL","onClick","webformatURL","tags","id","src","alt","ImageGalleryItemImage","ImageGallery","getElem","map","Button","fetchImg","modalRoot","document","querySelector","Modal","handleKeydown","code","onClose","handleBackdropClick","target","currentTurget","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","isLoading","showModal","resultLength","error","msg","options","api","result","length","prevState","scrollWindow","alert","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","console","log","total","toggleModal","elem","prevProps","toNextPage","shouldRenderLoadMoreBtn","onFetchImg","width","height","color","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.13659ba0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1Ba4u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"Searchbar_App___fcbD\",\"Searchbar\":\"Searchbar_Searchbar__u8Gfd\",\"SearchForm\":\"Searchbar_SearchForm__1Coyf\",\"SearchForm-button\":\"Searchbar_SearchForm-button__1EpWM\",\"SearchForm-button-label\":\"Searchbar_SearchForm-button-label__DdpCK\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1IUn7\",\"ImageGallery\":\"Searchbar_ImageGallery__yOB_d\",\"ImageGalleryItem\":\"Searchbar_ImageGalleryItem__2Y8b8\",\"ImageGalleryItemImage\":\"Searchbar_ImageGalleryItemImage__3puql\",\"Overlay\":\"Searchbar_Overlay__1MMI8\",\"Modal\":\"Searchbar_Modal__1s4FI\",\"Button\":\"Searchbar_Button__E-F7D\"};","import React from \"react\";\r\n\r\nconst baseUrl = \"https://pixabay.com/api/\";\r\nconst apiKey = \"20840162-f62ff7402b91de28f502cc31c\";\r\n\r\nfunction getFetch(searchQuery, currentPage) {\r\n  const url = `${baseUrl}&?q=${searchQuery}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=12&key=${apiKey}`;\r\n  return fetch(url)\r\n  .then((res) => res.json())\r\n  .then((response) => response.hits);\r\n  \r\n}\r\n\r\n////////////////////////////////////////////////\r\n// import axios from \"axios\";\r\n// axios.defaults.baseURL = \"https://pixabay.com/api/\";\r\n// let key = \"20791444-9e10ec7121cc0b87619d148c0\";\r\n// // const URL = `${this.baseUrl}?q=${query}&page=${this.page}&image_type=photo&orientation=horizontal&per_page=${this.per_page}`;\r\n// const getFetch = ({ query = \"\", currentPage = 1 }) => {\r\n//   return axios\r\n//     .get(\r\n//       `?q=${query}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=12${key}`\r\n//     )\r\n//     .then((response) => response.hits);\r\n// };\r\n\r\n\r\nexport default { getFetch };","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  static propTypes = {\r\n    changeQuery: PropTypes.func,\r\n  };\r\n  \r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ query: e.currentTarget.value });\r\n  };\r\n  \r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { query } = this.state;\r\n    this.props.changeQuery({ query });\r\n    // const {changeQuery} = this.props;\r\n    // changeQuery(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n\r\n  render() {\r\n    const { query } = this.state;\r\n\r\n    return (\r\n       <header className={s.Searchbar}>\r\n        <form  onSubmit={this.handleSubmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            name=\"query\"\r\n            value={query}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  };\r\n};\r\n\r\nexport default Searchbar;\r\n","import React, {Component} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from '../Searchbar/Searchbar.module.css';\r\n\r\n\r\nclass ImageGalleryItem extends Component {\r\n  state = {\r\n    selectedImg: this.props.largeImageURL,\r\n  };\r\n\r\n  handleChange = () => {\r\n    this.props.onClick(this.state.largeImageURL);\r\n  };\r\n\r\n  render() {\r\n    const {webformatURL, tags, id} = this.props;\r\n\r\n    return (\r\n      <li onClick={this.handleChange}>\r\n        <img\r\n          src={webformatURL}\r\n          alt={tags}\r\n          key={id}\r\n          className={s.ImageGalleryItemImage}\r\n        />\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import React, { Component } from \"react\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport s from '../Searchbar/Searchbar.module.css';\r\n\r\n\r\nconst ImageGallery = ({ hits, getElem }) => {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      {hits.map(({id, tags, webformatURL, largeImageURL }) => (\r\n        <ImageGalleryItem \r\n          key={id}\r\n          alt={tags}\r\n          src={webformatURL}\r\n          selectedImg={largeImageURL}\r\n          getElem={getElem}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nconst Button = ({ fetchImg }) => (\r\n  <button \r\n    type=\"button\" \r\n    className={s.Button} \r\n    onClick={fetchImg}>\r\n    Load more \r\n  </button>\r\n  // console.log(fetchImg)\r\n);\r\n\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  fetchImg: PropTypes.func.isRequired,\r\n};","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from '../Searchbar/Searchbar.module.css';\r\n\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    handleBackdropClick: PropTypes.func,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n\r\n  componentWillMount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n  //закриття по Escape\r\n  handleKeydown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  //  //закриття по BackdropClick\r\n  handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTurget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n","import { Component } from \"react\";\nimport api from \"./services/API\";\nimport Searchbar from \"./Components/Searchbar/Searchbar\";\nimport ImageGallery from \"./Components/ImageGallery/ImageGallery\";\nimport Button from \"./Components/Button/Button\";\nimport Modal from \"./Components/Modal/Modal\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport \"./App.css\";\n// const fetch = api.getFetch().then((fetch) => console.log(fetch))\n\nclass App extends Component {\n  state = {\n    hits: [],\n    searchQuery: 'moon',\n    currentPage: 1,\n    isLoading: false,\n    showModal: false,\n    resultLength: null,\n    selectedImg: '',\n    error: null,\n    // total: null,\n    msg: null,\n  };\n\n  componentDidUpdate(prevState, prevProps) {\n    console.log('я обновился!');\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImg();\n      console.log(this.state.searchQuery);\n    } \n  };\n  \n  fetchImg = () => {\n    this.setState({ isLoading: true});\n    const { searchQuery, currentPage } = this.state;\n    const options = ({searchQuery, currentPage});\n\n    api.getFetch(options)\n    .then((result) => { \n      if(result.length) {\n        this.setState((prevState) => ({\n          hits: [...prevState.hits, ...result],\n          resultLength: result.length, \n          currentPage: prevState.currentPage + 1 }))\n        this.scrollWindow();\n      } else {\n        this.setState({msg: 'Please write a correct search'});\n        alert(this.state.msg);\n      }\n    })\n    .catch(error => this.setState({ error }))\n    .finally(() => this.setState({ isLoading: false }));\n  };\n\n  scrollWindow = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth'})\n  };\n  \n  changeQuery = (query) => {\n    console.log(query);\n    if (this.state.searchQuery !== query) {\n      this.setState ({searchQuery: query, currentPage: 1, total: 0, hits: [], isLoading: true});\n      console.log(this.state.searchQuery);  \n    }\n    return;\n  };\n\n  scrollTo = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  getElem = (elem) => {\n    this.setState({ selectedImg: elem });\n    this.toggleModal();\n  };\n\n  render() {\n    const { showModal, isLoading, hits, resultLength, selectedImg, toNextPage } = this.state;\n    const { toggleModal, getElem, changeQuery, fetchImg } = this;\n    // const { hits } = this.props;\n    const shouldRenderLoadMoreBtn = resultLength === 12 && !isLoading;\n    return (\n      <>\n        <Searchbar changeQuery={changeQuery} />\n        <ImageGallery hits={hits} getElem={getElem} />\n\n        {shouldRenderLoadMoreBtn &&  <Button onFetchImg={fetchImg} />} \n        \n        {showModal && (\n          <Modal onClose={toggleModal}>\n            <img \n              src={selectedImg} \n              width=\"600\" \n              height=\"400\" \n            />\n          </Modal>\n        )}\n\n        {isLoading && \n          <Loader \n            type=\"BallTriangle\" \n            color=\"#00BFFF\" \n            height={80}\n            width={80} \n            timeout={2500} \n          />}\n      </>\n    );\n  };\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}