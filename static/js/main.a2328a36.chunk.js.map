{"version":3,"sources":["API/API.js","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Button/Button.js","Components/Modal/Modal.js","App.js","index.js"],"names":["getFetch","query","currentPage","fetch","then","res","json","response","hits","Searchbar","state","showModal","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","this","className","type","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","getElem","map","elem","src","webformatURL","alt","tags","ImageGallery","hit","id","Button","onFetchImg","onClick","modalRoot","document","querySelector","Modal","handleKeydown","code","onClose","handleBackdropClick","currentTurget","window","addEventListener","removeEventListener","createPortal","children","App","searchQuery","isLoading","resultLength","error","onChangeQuery","api","result","length","catch","console","log","fetchImg","prevState","scrollTo","finally","top","documentElement","scrollHeight","behavior","toggleModal","largeImageURL","width","height","color","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a2328a36.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst baseUrl = \"https://pixabay.com/api/\";\r\nconst apiKey = \"20840162-f62ff7402b91de28f502cc31c\";\r\n\r\nfunction getFetch(query, currentPage) {\r\n  return fetch(`${baseUrl}?q=${query}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=12&key=${apiKey}`)\r\n  .then((res) => res.json())\r\n  .then((response) => response.hits);\r\n}\r\n\r\n////////////////////////////////////////////////\r\n// import axios from \"axios\";\r\n// axios.defaults.baseURL = \"https://pixabay.com/api/\";\r\n// let key = \"20791444-9e10ec7121cc0b87619d148c0\";\r\n// // const URL = `${this.baseUrl}?q=${query}&page=${this.page}&image_type=photo&orientation=horizontal&per_page=${this.per_page}`;\r\n// const getFetch = ({ query = \"\", currentPage = 1 }) => {\r\n//   return axios\r\n//     .get(\r\n//       `?q=${query}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=12${key}`\r\n//     )\r\n//     .then((response) => response.hits);\r\n// };\r\n\r\n\r\nexport default { getFetch };","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// import \"../Styles/Styles.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    showModal: false,\r\n    query: \"\",\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ query: e.target.value });\r\n  };\r\n  \r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: \"\" });\r\n  };\r\n\r\n  render() {\r\n    // const { handleChange, handleSubmit } = this;\r\n    const { query } = this.state;\r\n\r\n    return (\r\n      <>\r\n       <header className=\"Searchbar\">\r\n        <form  onSubmit={this.handleSubmit} className=\"SearchForm\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"SearchForm-button\"\r\n          >\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            onChange={this.handleChange}\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={query}\r\n          />\r\n        </form>\r\n      </header>\r\n      </>\r\n    );\r\n  };\r\n};\r\n\r\nexport default Searchbar;\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// import \"../Styles/Styles.module.css\";\r\n\r\nconst ImageGalleryItem = ({ hits, getElem }) => {\r\n  return (\r\n    <>\r\n      {hits.map(elem => (\r\n        <li className=\"ImageGalleryItem\" >\r\n          <img\r\n            src={elem.webformatURL}\r\n            alt={elem.tags}\r\n            getElem={()=>getElem(elem)}\r\n            className=\"ImageGalleryItem-image\"\r\n          />\r\n        </li>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n\r\nImageGalleryItem.propTypes = {\r\n  hits: PropTypes.shape({\r\n    webformatURL: PropTypes.string.isRequired,\r\n    tags: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  getElem: PropTypes.func.isRequired,\r\n};","import React, { Component } from \"react\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ hits, getElem }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {hits.map( hit => (\r\n        <ImageGalleryItem \r\n          key={hit.id}\r\n          alt={hit.tags}\r\n          hit={hit}\r\n          getElem={getElem}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n// import s from '.././Styles/Styles.module.css';\r\n\r\nconst Button = ({ onFetchImg }) => (\r\n    <button \r\n      type=\"button\" \r\n      className=\"Button\" \r\n      onClick={onFetchImg}>\r\n      Load more \r\n    </button>\r\n);\r\n\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  fetchImg: PropTypes.func.isRequired,\r\n};","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n\r\n  componentWillMount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n  //закриття по Escape\r\n  handleKeydown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  //  //закриття по BackdropClick\r\n  handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTurget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n","import { Component } from \"react\";\nimport api from \"./API/API\";\nimport Searchbar from \"./Components/Searchbar/Searchbar\";\nimport ImageGallery from \"./Components/ImageGallery/ImageGallery\";\nimport Button from \"./Components/Button/Button\";\nimport Modal from \"./Components/Modal/Modal\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport \"./App.css\";\n\n// const fetch = api.getFetch().then((fetch) => console.log(fetch))\n\nclass App extends Component {\n  state = {\n    hits: [],\n    searchQuery: \"\",\n    currentPage: 1,\n    isLoading: false,\n    showModal: false,\n    resultLength: null,\n    elem: '',\n    error: null,\n  };\n\n  componentDidUpdate(prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImg(this.state.searchQuery);\n    };\n  }\n  \n  onChangeQuery = (query) => {\n    const { currentPage } = this.state;\n    this.setState({ isLoading: true });\n\n    api.getFetch(query, currentPage).then((result) => {\n      this.setState({ \n        hits: result, \n        resultLength: result.length, \n        isLoading: false });\n      })\n      .catch((error) => {\n        console.log(\"ERROR\", error)\n      })\n\n    if(this.state.searchQuery === query) {\n      return;\n    } this.setState ({searchQuery: query, currentPage: 1, hits: [] });\n  };  \n\n  fetchImg = () => {\n    this.setState({ isLoading: true });\n    const { searchQuery, currentPage } = this.state;\n\n    api.getFetch(searchQuery, currentPage).then((result) => {\n      // console.log(result.length);\n      this.setState((prevState) => ({\n        hits: [...prevState.hits, ...result],\n        currentPage: prevState.currentPage + 1,\n      }));\n      this.scrollTo();\n    })\n    .catch(error => this.setState({ error }))\n    .finally(() => this.setState({ isLoading: false }));\n  };\n  \n  scrollTo = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  getElem = (elem) => {\n    if (elem) {\n      this.setState({ elem });\n      this.toggleModal();\n    }\n  };\n\n  render() {\n    const { showModal, isLoading, hits, elem, resultLength } = this.state;\n    // const { toggleModal, getElem, fetchImg, onChangeQuery } = this;\n    // const shouldRenderLoadMoreBtn = resultLength >= 12 && !isLoading;\n    return (\n      <>\n        <Searchbar onSubmit={this.onChangeQuery} />\n        <ImageGallery hits={hits} getElem={this.getElem} />\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={elem.largeImageURL} width=\"800\" height=\"600\" />\n          </Modal>\n        )}\n        {resultLength === 12 && !isLoading && <Button onFetchImg={this.fetchImg} />} \n        <Loader \n          type=\"BallTriangle\" \n          color=\"#00BFFF\" \n          height={80} \n          width={80} \n          timeout={2500}         \n        />\n      </>\n    );\n  };\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}