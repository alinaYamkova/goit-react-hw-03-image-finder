{"version":3,"sources":["Components/Searchbar/Searchbar.module.css","services/API.js","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Button/Button.js","Components/Modal/Modal.js","App.js","index.js"],"names":["module","exports","getFetch","searchQuery","currentPage","url","fetch","then","res","json","response","hits","Searchbar","state","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","this","className","s","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","name","onChange","Component","ImageGalleryItem","webformatURL","largeImageURL","tags","getElem","ImageGalleryItemImage","src","alt","onClick","ImageGallery","map","id","Button","onFetchImg","modalRoot","document","querySelector","Modal","handleKeydown","code","onClose","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","isLoading","showModal","resultLength","error","msg","fetchImg","api","result","length","prevState","scrollWindow","alert","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","changeQuery","console","log","data","toggleModal","prevProps","shouldRenderLoadMoreBtn","width","height","color","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fa1d02cb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"Searchbar_App___fcbD\",\"Searchbar\":\"Searchbar_Searchbar__u8Gfd\",\"SearchForm\":\"Searchbar_SearchForm__1Coyf\",\"SearchFormButton\":\"Searchbar_SearchFormButton__bH_LD\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2aZvx\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1IUn7\",\"ImageGallery\":\"Searchbar_ImageGallery__yOB_d\",\"ImageGalleryItem\":\"Searchbar_ImageGalleryItem__2Y8b8\",\"ImageGalleryItemImage\":\"Searchbar_ImageGalleryItemImage__3puql\",\"Overlay\":\"Searchbar_Overlay__1MMI8\",\"Modal\":\"Searchbar_Modal__1s4FI\",\"Button\":\"Searchbar_Button__E-F7D\"};","import React from \"react\";\r\n\r\nconst baseUrl = \"https://pixabay.com/api/\";\r\nconst apiKey = \"20840162-f62ff7402b91de28f502cc31c\";\r\n\r\nfunction getFetch(searchQuery, currentPage) {\r\n  const url = `${baseUrl}?q=${searchQuery}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=12&key=${apiKey}`;\r\n  return fetch(url)\r\n  .then((res) => res.json())\r\n  .then((response) => response.hits);\r\n  \r\n}\r\n\r\n////////////////////////////////////////////////\r\n// import axios from \"axios\";\r\n// axios.defaults.baseURL = \"https://pixabay.com/api/\";\r\n// let key = \"20791444-9e10ec7121cc0b87619d148c0\";\r\n// // const URL = `${this.baseUrl}?q=${query}&page=${this.page}&image_type=photo&orientation=horizontal&per_page=${this.per_page}`;\r\n// const getFetch = ({ query = \"\", currentPage = 1 }) => {\r\n//   return axios\r\n//     .get(\r\n//       `?q=${query}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=12${key}`\r\n//     )\r\n//     .then((response) => response.hits);\r\n// };\r\n\r\n\r\nexport default { getFetch };","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from '../Searchbar/Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func,\r\n  };\r\n  \r\n  state = {\r\n    searchQuery: '',\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ searchQuery: e.target.value });\r\n  };\r\n  \r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // const { searchQuery } = this.state;\r\n    this.props.onSubmit( this.state.searchQuery);\r\n    this.setState({ searchQuery: '' });\r\n  };\r\n\r\n  render() {\r\n    const { searchQuery } = this.state;\r\n\r\n    return (\r\n       <header className={s.Searchbar}>\r\n        <form  onSubmit={this.handleSubmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            name=\"searchQuery\"\r\n            value={searchQuery}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  };\r\n};\r\n\r\nexport default Searchbar;\r\n","import React, {Component} from \"react\";\r\nimport s from '../Searchbar/Searchbar.module.css';\r\n\r\nconst ImageGalleryItem = ({ webformatURL, largeImageURL, tags, getElem}) => {\r\n  return (\r\n    <li className={s.ImageGalleryItem}>\r\n      <img\r\n          className={s.ImageGalleryItemImage}\r\n          src={webformatURL}\r\n          alt={tags}\r\n          onClick={()=>(getElem(largeImageURL))} \r\n        />\r\n    </li>\r\n  );\r\n}\r\n\r\n\r\nexport default ImageGalleryItem;","import React, { Component } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport s from '../Searchbar/Searchbar.module.css';\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n// import { v4 as uuidv4 } from 'uuid';\r\n\r\nconst ImageGallery = ({ hits, getElem }) => {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      {hits.map(({id, tags, webformatURL, largeImageURL }) => (\r\n        <ImageGalleryItem \r\n          key={id}\r\n          tags={tags}\r\n          webformatURL={webformatURL}\r\n          largeImageURL={largeImageURL}\r\n          getElem={getElem}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n\r\nImageGallery.propTypes = {\r\n  hits: PropTypes.array.isRequired,\r\n  getElem: PropTypes.func.isRequired,\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from '../Searchbar/Searchbar.module.css';\r\n\r\nconst Button = ({ onFetchImg }) => (\r\n  <button \r\n    type=\"button\" \r\n    className={s.Button} \r\n    onClick={onFetchImg}\r\n  >\r\n    Load more \r\n  </button>\r\n);\r\n\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  onFetchImg: PropTypes.func,\r\n};","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from '../Searchbar/Searchbar.module.css';\r\n\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    handleBackdropClick: PropTypes.func,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n  //закриття по Escape\r\n  handleKeydown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  //  //закриття по BackdropClick\r\n  handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  children: PropTypes.node,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n","import { Component } from \"react\";\nimport api from \"./services/API\";\nimport Searchbar from \"./Components/Searchbar/Searchbar\";\nimport ImageGallery from \"./Components/ImageGallery/ImageGallery\";\nimport Button from \"./Components/Button/Button\";\nimport Modal from \"./Components/Modal/Modal\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport \"./App.css\";\n// const fetch = api.getFetch().then((fetch) => console.log(fetch))\n\nclass App extends Component {\n  state = {\n    hits: [],\n    searchQuery: '',\n    currentPage: 1,\n    isLoading: false,\n    showModal: false,\n    resultLength: null,\n    largeImageURL: '',\n    error: null,\n    // total: null,\n    msg: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImg();\n    }\n  };\n\n  fetchImg = () => {\n    const { searchQuery, currentPage } = this.state;\n    this.setState({ isLoading: true});\n\n    api.getFetch(searchQuery, currentPage)\n    .then((result) => { \n      if(result.length) {\n        this.setState((prevState) => ({\n          hits: [...prevState.hits, ...result],\n          resultLength: result.length, \n          currentPage: prevState.currentPage + 1 }))\n        this.scrollWindow();\n      } else {\n        this.setState({msg: 'Please write a correct search'});\n        alert(this.state.msg);\n      }\n    })\n    .catch(error => this.setState({ error }))\n    .finally(() => this.setState({ isLoading: false }));\n  };\n\n  scrollWindow = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth'})\n  };\n  \n  changeQuery = (searchQuery) => {\n    console.log('before_searchQuery', this.state.searchQuery);\n    if (this.state.searchQuery === searchQuery) {\n      return;\n    } \n    api.getFetch(searchQuery, 1)\n    .then(data =>\n      this.setState({ hits: [], searchQuery: searchQuery, currentPage: 1,\n        isLoading: true, resultLength: data.length === 12 }))\n    .catch(error => console.error({ error }));\n    // console.log('after_searchQuery', this.state.searchQuery);\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  getElem = (url) => {\n    this.setState({ largeImageURL: url });\n    this.toggleModal();\n  };\n\n  render() {\n    const { showModal, isLoading, hits, resultLength, largeImageURL } = this.state;\n    const { toggleModal, getElem, changeQuery, fetchImg } = this;\n    const shouldRenderLoadMoreBtn = resultLength === 12 && !isLoading;\n    return (\n      <>\n        <Searchbar onSubmit={changeQuery} />\n        <ImageGallery hits={hits} getElem={getElem} />\n\n        {shouldRenderLoadMoreBtn &&  <Button onFetchImg={fetchImg} />} \n        \n        {showModal && (\n          <Modal onClose={toggleModal}>\n            <img \n              src={largeImageURL} \n              width=\"600\" \n              height=\"400\" \n            />\n          </Modal>\n        )}\n\n        {isLoading && \n          <Loader \n            type=\"BallTriangle\" \n            color=\"#00BFFF\" \n            height={80}\n            width={80} \n            timeout={2500} \n          />}\n      </>\n    );\n  };\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}